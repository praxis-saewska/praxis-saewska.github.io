{# Macros for common data display #}

{% macro contact_info() %}
{% set contact = CONTACT_INFO | default({
    'address_street': 'Uhlandstr. 87',
    'address_city': '10717 Berlin',
    'phone': '[Ihre Telefonnummer]',
    'email': 'info@praxis-saewska.de'
}) %}
<div class="contact-info">
    <div class="contact-item">
        <h3>{{ _('Adresse') }}</h3>
        <p>{{ contact.address_street }}<br>{{ contact.address_city }}</p>
    </div>
    <div class="contact-item">
        <h3>{{ _('Telefon') }}</h3>
        <p><a href="tel:{{ contact.phone }}">{{ contact.phone }}</a></p>
    </div>
    <div class="contact-item">
        <h3>{{ _('E-Mail') }}</h3>
        <p><a href="mailto:{{ contact.email }}">{{ contact.email }}</a></p>
    </div>
</div>
{% endmacro %}

{% macro opening_hours() %}
{# Debug: Check if OPENING_HOURS is available #}
{% set hours = {} %}
{% if OPENING_HOURS is defined and OPENING_HOURS %}
    {% set hours = OPENING_HOURS %}
{% else %}
    {# Fallback to site_data values directly #}
    {% set hours = {
        'monday': '09:00 - 10:00',
        'tuesday': '09:00 - 14:00',
        'wednesday': '09:00 - 14:00 15:00 - 17:00',
        'thursday': '09:00 - 17:00',
        'friday': '09:00 - 17:00',
        'saturday': 'Geschlossen',
        'sunday': 'Geschlossen'
    } %}
{% endif %}

{# Localize "closed" label based on current site URL (language subsite) #}
{% set siteurl = SITEURL | default('') %}
{% if siteurl.endswith('/en') or siteurl == '/en' %}
    {% set closed_text = 'Closed' %}
{% elif siteurl.endswith('/ru') or siteurl == '/ru' %}
    {% set closed_text = 'Закрыто' %}
{% elif siteurl.endswith('/uk') or siteurl == '/uk' %}
    {% set closed_text = 'Закрито' %}
{% else %}
    {% set closed_text = 'Geschlossen' %}
{% endif %}

<table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Montag') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">{{ hours.monday }}</td>
    </tr>
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Dienstag') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">{{ hours.tuesday }}</td>
    </tr>
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Mittwoch') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">{{ hours.wednesday }}</td>
    </tr>
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Donnerstag') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">{{ hours.thursday }}</td>
    </tr>
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Freitag') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">{{ hours.friday }}</td>
    </tr>
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Samstag') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">
            {% if ' - ' in hours.saturday %}
                {{ hours.saturday }}
            {% else %}
                {{ closed_text }}
            {% endif %}
        </td>
    </tr>
    <tr style="border-bottom: 1px solid var(--border-light);">
        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Sonntag') }}</td>
        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">
            {% if ' - ' in hours.sunday %}
                {{ hours.sunday }}
            {% else %}
                {{ closed_text }}
            {% endif %}
        </td>
    </tr>
</table>
{% endmacro %}

{% macro map_container() %}
<div class="map-container" id="google-map-container">
    <div id="map-consent-message" class="map-consent-message">
        <p><strong>{{ _('Map is loading') }}</strong></p>
        <p>{{ _('To display the map, we need your consent to use cookies.') }}</p>
        <p style="margin-top: 1rem; font-size: 0.9rem;">{{ _('Please accept cookies in the cookie banner to see the map.') }}</p>
    </div>
    <iframe
        data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4858.949177167592!2d13.319794212440835!3d52.48864823843353!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47a850f4bd3f636b%3A0x74162961ef9f5934!2sUhlandstra%C3%9Fe%2087%2C%2010717%20Berlin!5e0!3m2!1sen!2sde!4v1763564262086!5m2!1sen!2sde"
        width="100%"
        height="100%"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        title="{{ _('Praxis Location') }}">
    </iframe>
</div>
{% endmacro %}

