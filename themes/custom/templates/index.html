{% extends "base.html" %}

{% block content %}
{% for p in pages %}
{% if p.lang == DEFAULT_LANG %}
    {% if not p.slug or p.slug == "" or p.slug == "index" or "gynakologie" in p.slug or "gynecology" in p.slug or "ginekologiia" in p.slug %}
        {% set page = p %}
    {# Home page content #}
    <section class="hero">
        <div class="hero-content">
            <h1>{{ page.title if page else SITENAME }}</h1>
            {% if page %}
                {# Pelican converts metadata: Hero_Subtitle becomes hero_subtitle attribute #}
                {% set hero_subtitle = page.hero_subtitle | default('', true) %}
                {% if hero_subtitle %}
                <p>{{ hero_subtitle }}</p>
                {% endif %}
            {% endif %}
            <a href="#appointment" class="btn">{{ _('Book Appointment') }}</a>
        </div>
    </section>

    <section id="services" class="section">
        <div class="container">
            <h2 class="section-title">{{ _('Our Services') }}</h2>
            <div class="services-grid">
                {% if page and page.content %}
                {{ page.content }}
                {% endif %}
            </div>
        </div>
    </section>

    <section id="appointment" class="appointment-section">
        <div class="container">
            <h2 class="section-title">{{ _('Book Appointment') }}</h2>
            <div class="doctolib-placeholder">
                <h3>{{ _('Online Appointment Booking') }}</h3>
                <p>{{ _('Book your appointment conveniently online via Doctolib.') }}</p>
                
                <!-- PLACEHOLDER: Replace this div with your Doctolib widget code -->
                <div style="background-color: #f0f0f0; padding: 2rem; border-radius: 4px; margin: 1rem 0; text-align: center; color: #666;">
                    <p><strong>{{ _('Doctolib Widget will be inserted here') }}</strong></p>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">{{ _('Please insert your Doctolib widget code here') }}</p>
                </div>
                
                <div class="doctolib-instructions">
                    <p><strong>{{ _('Instructions for Doctolib Integration:') }}</strong></p>
                    <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>{{ _('Log in to your Doctolib account') }}</li>
                        <li>{{ _('Go to "Settings" â†’ "Widget"') }}</li>
                        <li>{{ _('Copy the provided widget code') }}</li>
                        <li>{{ _('Replace the placeholder area above with the Doctolib code') }}</li>
                    </ol>
                    <p style="margin-top: 1rem;"><strong>{{ _('Alternatively: Add a link to your Doctolib booking page:') }}</strong></p>
                    <code>https://www.doctolib.de/...</code>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">{{ _('Contact') }}</h2>

            <div class="contact-info">
                <div class="contact-item">
                    <h3>{{ _('Address') }}</h3>
                    <p>Uhlandstr. 87<br>10717 Berlin</p>
                </div>
                <div class="contact-item">
                    <h3>{{ _('Phone') }}</h3>
                    <p><a href="tel:[Ihre Telefonnummer]">[Ihre Telefonnummer]</a></p>
                </div>
                <div class="contact-item">
                    <h3>{{ _('Email') }}</h3>
                    <p><a href="mailto:info@praxis-saewska.de">info@praxis-saewska.de</a></p>
                </div>
            </div>

            <div class="about-section" style="margin-bottom: 3rem;">
                <h2>{{ _('Opening Hours') }}</h2>
                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                    <tr style="border-bottom: 1px solid var(--border-light);">
                        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Monday') }}</td>
                        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">09:00 - 17:00</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-light);">
                        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Tuesday') }}</td>
                        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">09:00 - 17:00</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-light);">
                        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Wednesday') }}</td>
                        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">09:00 - 17:00</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-light);">
                        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Thursday') }}</td>
                        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">09:00 - 17:00</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-light);">
                        <td style="padding: 0.75rem 0; font-weight: 600;">{{ _('Friday') }}</td>
                        <td style="padding: 0.75rem 0; text-align: right; color: var(--soft-gray);">09:00 - 17:00</td>
                    </tr>
                </table>
                <p style="margin-top: 1rem; color: var(--soft-gray); font-size: 0.9rem;"><em>{{ _('Please update the opening hours with your actual times.') }}</em></p>
            </div>

            <div class="about-section" style="margin-bottom: 3rem;">
                <h2>{{ _('How to Find Us') }}</h2>
                {% if page and page.metadata and page.metadata.get('directions') %}
                {{ page.metadata.get('directions') | safe }}
                {% else %}
                <p>{{ _('Our practice is located in Charlottenburg.') }}</p>
                <p><strong>{{ _('By Car:') }}</strong><br>
                <span>{{ _('[Description of how to get there by car]') }}</span></p>
                <p><strong>{{ _('By Public Transport:') }}</strong><br>
                <span>{{ _('[Description of how to get there by public transport]') }}</span></p>
                <p><strong>{{ _('Parking:') }}</strong><br>
                <span>{{ _('[Information about parking]') }}</span></p>
                {% endif %}
            </div>

            <div class="about-section">
                <h2>{{ _('Location') }}</h2>
                <div class="map-container" id="google-map-container">
                    <div id="map-consent-message" class="map-consent-message">
                        <p><strong>{{ _('Map is loading') }}</strong></p>
                        <p>{{ _('To display the map, we need your consent to use cookies.') }}</p>
                        <p style="margin-top: 1rem; font-size: 0.9rem;">{{ _('Please accept cookies in the cookie banner to see the map.') }}</p>
                    </div>
                    <iframe
                        data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4858.949177167592!2d13.319794212440835!3d52.48864823843353!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47a850f4bd3f636b%3A0x74162961ef9f5934!2sUhlandstra%C3%9Fe%2087%2C%2010717%20Berlin!5e0!3m2!1sen!2sde!4v1763564262086!5m2!1sen!2sde"
                        width="100%"
                        height="100%"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"
                        title="{{ _('Praxis Location') }}">
                    </iframe>
                </div>
            </div>
        </div>
    </section>
    {% endif %}
{% endif %}
{% endfor %}
{% endblock %}

{% block extra_head %}
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MedicalBusiness",
      "name": "{{ SITENAME }}",
      "image": "{{ SITEURL }}/{{ THEME_STATIC_DIR }}/images/elena-saewska.jpg",
      "@id": "{{ SITEURL }}",
      "url": "{{ SITEURL }}",
      "telephone": "[Ihre Telefonnummer]",
      "email": "info@praxis-saewska.de",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Uhlandstr. 87",
        "addressLocality": "10717 Berlin",
        "addressRegion": "Berlin",
        "addressCountry": "DE"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 52.488648,
        "longitude": 13.319794
      },
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "09:00",
          "closes": "17:00"
        }
      ],
      "priceRange": "$$",
      "medicalSpecialty": "Gynecology",
      "founder": {
        "@type": "Physician",
        "name": "{{ PRACTICE_INFO.doctor_name }}",
        "medicalSpecialty": "{{ PRACTICE_INFO.specialty }}"
      }
    }
    </script>
{% endblock %}
